# Health check specific configuration to override all others
server {
    listen 80;
    listen [::]:80;
    
    # Settings to prevent any redirects
    absolute_redirect off;
    port_in_redirect off;
    server_name_in_redirect off;
    
    # Specific, direct health check with high priority
    location = /health {
        # Disable any potential redirects
        absolute_redirect off;
        add_header Content-Type text/plain;
        return 200 "OK";
    }
    
    # For all other requests, pass to the next server block
    location / {
        return 444;  # Connection closed without response
    }
}